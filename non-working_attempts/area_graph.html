<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Infant Care Costs</title>
        <!-- d3 hookup-->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Add fonts here-->

        <!-- stylesheet-->
    <link rel="stylesheet" href="stylesheets/styles.css">

</head>

<body>
   
    <div id="areaGraph">
        <script type="text/javascript">

            //Consts
            const w = 800;
            const h = 500;
            const margin = 50;
            const parseTime = d3.timeParse("%Y");//time parser - changed to just show the year



            /* Data source: National Database of Childcare Prices  */

            d3.csv("datasets/ccdata.csv").then(data => {
                console.log("data", data)

            /*data translation*/

                data.forEach(d => {
                    d.year = parseTime(+d.year);
                    d.county= d.county;
                    d.mhi = +d.mhi;
                    d.totalpop = +d.totalpop;
                    d.mcinfant = +d.mcinfant;
                    d.careburden = +d.careburden;
                    d.benchmark = +d.benchmark;
                });


                //scales - x scale set by year, y scale set manually
                const xScale = d3.scaleTime()
                    .domain([2008, 2018])
                    .range([margin, w - margin]);

                const yScale = d3.scaleLinear()
                    .domain([0, 80000])
                    .range([h - margin, margin]);

                //SVG
                const svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h);


                //bottom axis
                const bottomAxis = d3.axisBottom()
                    .scale(xScale)
                    .tickFormat(d3.timeFormat("%Y"));


                svg.append("g")
                    .attr("class", "axis")
                    .attr("transform", "translate(0," + (h - margin) + ")")
                    .call(bottomAxis);

                //left axis
                const leftAxis = d3.axisLeft()
                    .scale(yScale);


                svg.append("g")
                    .attr("class", "axis")
                    .attr("transform", "translate(" + margin + ",0)")
                    .call(leftAxis);


                //MHI -- Household Income
                const mhi_line = d3.line()

                    .x(d => xScale(d.year))
                    .y(d => yScale(d.mhi));

                //MHI line
                svg.append("path")
                    .attr("d", mhi_line(data))
                    .attr("class", "line")
                    .attr("id", "mhi")

                console.log("path", mhi_line(data))

                /*// label
                svg.append("text")

                    .attr("y", 66)
                    .attr("x", 466)
                    .attr("class", "athome line_label_text")
                    .text("The price of food consumed at home")*/

                //food away from home
                /*const line2 = d3.line()

                    .x(d => xScale(d.year))
                    .y(d => yScale(d.food_away_from_home));




                //line
                svg.append("path")
                    .attr("d", line2(data))
                    .attr("class", "line")
                    .attr("id", "notathome")

                console.log("path", line2(data))
                //food away from home label
                svg.append("text")
                    .attr("y", 176)
                    .attr("x", 400)
                    .attr("class", "notathome line_label_text")
                    .text("The price of food consumed away from home")*/

                //x-axis label
                svg.append("text")
                    .attr("x", w / 2)
                    .attr("y", h - 5)
                    .attr("class", "axis_label")
                    .attr("id", "xAxisLabel")
                    .text("year")

                //y-axis label
                svg.append("text")
                    .attr("x", 0) //how to place 
                    .attr("y", w - 500)
                    .attr("class", "axis_label")
                    .attr("id", "xAxisLabel")
                    .attr("transform", "rotate(-90, 20, 300)")
                    .text("percent change")


            });




        </script>
    </div>
</body>

</html>