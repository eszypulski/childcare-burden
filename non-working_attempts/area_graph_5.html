<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Line</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="stylesheets/styles.css">
</head>

<body>
    <div id="areachart"></div>
    <script type="text/javascript">


// CHART DIMENSIONS AND MARGINS
const width = 928;
        const height = 500;
        const marginTop = 20;
        const marginRight = 30;
        const marginBottom = 30;
        const marginLeft = 40;

        // DATA

        d3.csv("datasets/ccdata.csv").then(data => {
            console.log("data", data);

            data.forEach(d => {
                d.year = +d.year;
                d.county = d.county;
                d.mhi = +d.mhi;
                d.totalpop = +d.totalpop;
                d.mcinfant = +d.mcinfant;
                d.careburden = +d.careburden;
                d.benchmark = +d.benchmark;
            });

        // Constants/global variables  
        const w = 1000;
        const h = 600;
        const margin = 50;
        const marginTop = 20;
        const marginRight = 30;
        const marginBottom = 30;
        const marginLeft = 40;
      // const parseTime = d3.timeParse("%Y");

    
    // X HORIZONTAL POSITION SCALE
            //const x = d3.scaleUtc(d3.extent(aapl, d => d.date), [marginLeft, width - marginRight]);  //ORIGINAL CODE FROM EXAMPLE

            const xScale = d3.scaleLinear()
            .domain(d3.extent([2008, 2018]))
                .range([marginLeft, width - marginRight]);


            const yScale = d3.scaleLinear()
                .domain([40000, 80000])
                .range([h - margin, margin]);

            // SVG
            const svg = d3.select("#areachart")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

            // Bottom axis with tick time formatting
            const bottomAxis = d3.axisBottom(xScale);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (h - margin) + ")")
                .call(bottomAxis);

            // Left axis
            const leftAxis = d3.axisLeft(yScale);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + margin + ",0)")
                .call(leftAxis);

            const areaMHI = d3.area()
                .x(d => xScale(d.year))
                .y0(yScale.range()[0]) // Start the fill at the bottom of the chart
                .y1(d => yScale(d.mhi));

            svg.append("path")
                .datum(data)
                .attr("d", areaMHI)
                .attr("fill", "#cce5df")
                .attr("stroke", "#69b3a2")
                .attr("stroke-width", 1.5);
        });
    </script>
</body>



</html>