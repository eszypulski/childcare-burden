<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Line</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="stylesheets/styles.css">
</head>

<body>
    <div id="areachart"></div>
    <script type="text/javascript">
        // Constants/global variables  
        const w = 500;
        const h = 500;
        const margin = 50;
        const parseTime = d3.timeParse("%Y");

        /* Data source: */
        d3.csv("datasets/ccdata.csv").then(data => {
            console.log("data", data);

            data.forEach(d => {
                d.year = parseTime(d.year);
                d.mhi = +d.mhi;
            });

            // Scales - with Scale Time
            const xScale = d3.scaleTime()
                .domain(d3.extent(data, d => d.year))
                .range([margin, w - margin]);

            const yScale = d3.scaleLinear()
                .domain([40000, 80000])
                .range([h - margin, margin]);

            // SVG
            const svg = d3.select("#areachart")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

            // Bottom axis with tick time formatting
            const bottomAxis = d3.axisBottom(xScale);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (h - margin) + ")")
                .call(bottomAxis);

            // Left axis
            const leftAxis = d3.axisLeft(yScale);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + margin + ",0)")
                .call(leftAxis);

            const areaMHI = d3.area()
                .x(d => xScale(d.year))
                .y0(yScale.range()[0]) // Start the fill at the bottom of the chart
                .y1(d => yScale(d.mhi));

            svg.append("path")
                .datum(data)
                .attr("d", area)
                .attr("fill", "#cce5df")
                .attr("stroke", "#69b3a2")
                .attr("stroke-width", 1.5);


            svg.append("path")
                .datum(data)
                .attr ("class", "line")
                .attr("stroke", "green")
                .attr("stroke-width", 1.5)
                .attr("fill", "none")
                .attr("d", line);
        });
    </script>
</body>



</html>